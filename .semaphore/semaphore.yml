version: v1.0
name: First pipeline example
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: "pre-Build"
    task:
      jobs:
        - "apk update"
        - "apk add curl"
  - name: "Build"
    task:
      jobs:
        - "apk add git"
        - "git submodule update --init"
        - "curl -sSL https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.tar.gz -o /tmp/hugo.tar.gz"
        - "echo \"${HUGO_CHECKSUM}  /tmp/hugo.tar.gz\" | sha256sum -c"
        - "tar xf /tmp/hugo.tar.gz hugo -C /tmp/ && cp /tmp/hugo /usr/bin"
        - "hugo --baseURL ${BASEURL}"
